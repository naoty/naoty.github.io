{"data":{"site":{"siteMetadata":{"rootURL":"https://naoty.github.io"}},"markdownRemark":{"frontmatter":{"title":"react-railsによるCSRF対策","time":"2018-02-18T12:08:00+0900","description":"react-railsを使ってReactコンポーネントのformにCSRFトークンを渡す","tags":["rails","react"]},"html":"<p>最近、react-railsを使ってRails上でReactコンポーネントを実装している。フォームを実装する際、Railsのフォームヘルパーは自動的にCSRFトークンを送るように<code class=\"language-text\">&lt;input&gt;</code>を生成してくれるが、Reactコンポーネントでフォームを実装する場合はそれを自分で実装する必要がある。</p>\n<p>react-railsであれば、Reactコンポーネントにpropsを簡単に渡せるため、props経由でCSRFトークンを渡すことで実装することができる。</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">// new.html.slim\n= react_component &quot;SignUpForm&quot;,\n  { csrf_params: request_forgery_protection_token, csrf_token: form_authenticity_token }</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">// SignUpForm.jsx\nrender() {\n  return (\n    &lt;form method=&quot;post&quot; action=&quot;/sign_up&quot;&gt;\n      &lt;input type=&quot;hidden&quot; name={this.props.csrfParams} value={this.props.csrfToken} /&gt;\n    &lt;/form&gt;\n  );\n}</code></pre></div>","fileAbsolutePath":"/home/circleci/project/contents/posts/20.md"}},"pageContext":{"isCreatedByStatefulCreatePages":false,"id":"ebc3195a-df88-52a0-933d-2adeffa038e7"}}