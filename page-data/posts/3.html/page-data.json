{"componentChunkName":"component---src-templates-post-jsx","path":"/posts/3.html","webpackCompilationHash":"9211bd75cea619f3bd78","result":{"data":{"site":{"siteMetadata":{"rootURL":"https://naoty.github.io"}},"markdownRemark":{"frontmatter":{"title":"モデルに記述する順番","time":"2017-12-02T23:02:00+0900","description":"Railsでモデルに記述する順番について考えてみた","tags":["rails"]},"html":"<p>他のメンバーがコードを読むときに知っておいてほしいことを意識して、以下の順に書いている。</p>\n<ol>\n<li>モジュール</li>\n<li>定数</li>\n<li>関連</li>\n<li>属性（<code class=\"language-text\">enum</code>, <code class=\"language-text\">attribute</code>など）</li>\n<li>コールバック</li>\n<li>バリデーション</li>\n<li>スコープ</li>\n<li>クラスメソッド</li>\n<li>インスタンスメソッド</li>\n<li>プライベートメソッド</li>\n</ol>\n<p>以下のコードは例のために書いてみたけど、動くかわからない。</p>\n<div class=\"gatsby-highlight\" data-language=\"rb\"><pre class=\"language-rb\"><code class=\"language-rb\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Pokemon</span> <span class=\"token operator\">&lt;</span> <span class=\"token constant\">ApplicationRecord</span>\n  include <span class=\"token constant\">Tradable</span>\n\n  <span class=\"token constant\">INITIAL_HP_RANGE</span> <span class=\"token operator\">=</span> <span class=\"token number\">10.</span><span class=\"token number\">.20</span>\n\n  belongs_to <span class=\"token symbol\">:master</span>\n  has_many <span class=\"token symbol\">:skills</span>\n\n  enum gender<span class=\"token punctuation\">:</span> <span class=\"token string\">%i[male female]</span>\n\n  before_validation <span class=\"token symbol\">:set_initial_hp</span><span class=\"token punctuation\">,</span> on<span class=\"token punctuation\">:</span> <span class=\"token symbol\">:create</span>\n\n  validates <span class=\"token symbol\">:name</span><span class=\"token punctuation\">,</span> presence<span class=\"token punctuation\">:</span> <span class=\"token keyword\">true</span>\n  validates <span class=\"token symbol\">:hp</span><span class=\"token punctuation\">,</span> numericality<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span> greater_than_or_equal_to<span class=\"token punctuation\">:</span> <span class=\"token number\">0</span> <span class=\"token punctuation\">}</span>\n\n  scope <span class=\"token symbol\">:first_generation</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">-</span><span class=\"token operator\">></span> <span class=\"token punctuation\">{</span> where<span class=\"token punctuation\">(</span>id<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span><span class=\"token number\">1.</span><span class=\"token number\">.151</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>to_a<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">def</span> <span class=\"token method-definition\"><span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span><span class=\"token function\">capture</span></span>\n    <span class=\"token comment\"># ...</span>\n  <span class=\"token keyword\">end</span>\n\n  <span class=\"token keyword\">def</span> <span class=\"token method-definition\"><span class=\"token function\">attack</span></span>\n    <span class=\"token comment\"># ...</span>\n  <span class=\"token keyword\">end</span>\n\n  <span class=\"token keyword\">private</span>\n\n  <span class=\"token keyword\">def</span> <span class=\"token method-definition\"><span class=\"token function\">set_initial_hp</span></span>\n    <span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span>hp <span class=\"token operator\">=</span> rand<span class=\"token punctuation\">(</span><span class=\"token constant\">INITIAL_HP_RANGE</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">end</span>\n<span class=\"token keyword\">end</span></code></pre></div>","fileAbsolutePath":"/home/circleci/project/contents/posts/3.md"}},"pageContext":{"isCreatedByStatefulCreatePages":false,"id":"38fc9f3c-273a-5ef2-b37e-87a4c12d5303"}}}