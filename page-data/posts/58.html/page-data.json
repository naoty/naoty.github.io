{"componentChunkName":"component---src-templates-post-jsx","path":"/posts/58.html","webpackCompilationHash":"12eb556cbb213d5753f5","result":{"data":{"site":{"siteMetadata":{"rootURL":"https://naoty.github.io"}},"markdownRemark":{"frontmatter":{"title":"自分のコンテナインスタンスIDを確認する","time":"2019-02-24T10:56:00+0900","description":null,"tags":["aws"]},"html":"<p>コンテナインスタンス内で自分自身のコンテナインスタンスIDをたまに取得したいときがあって、そういうときはコンテナインスタンスにログインして、こんな感じのコマンドを実行する。</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">curl</span> -s http://localhost:51678/v1/metadata <span class=\"token operator\">|</span> jq -r .ContainerInstanceArn <span class=\"token operator\">|</span> <span class=\"token function\">cut</span> -d <span class=\"token string\">'/'</span> -f <span class=\"token number\">2</span></code></pre></div>\n<p><code class=\"language-text\">http://localhost:51678/v1/metadata</code>はコンテナインスタンス内で動くecs-agentが公開しているエンドポイントで、メタデータを返してくれる。コンテナインスタンスIDを返してくれるわけではないので、ARNから強引に抽出していく。</p>\n<p>参考: <a href=\"https://docs.aws.amazon.com/ja_jp/AmazonECS/latest/developerguide/ecs-agent-introspection.html\">https://docs.aws.amazon.com/ja_jp/AmazonECS/latest/developerguide/ecs-agent-introspection.html</a></p>","fileAbsolutePath":"/home/circleci/project/contents/posts/58.md"}},"pageContext":{"isCreatedByStatefulCreatePages":false,"id":"fcb62147-cf00-5014-a9f1-a7e7b23fabf9"}}}